<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìŠ¤ë§ˆíŠ¸ ì›ë‹¨ ë¶„ì„ Â· ì´ë¯¸ì§€ ë¶„ë¥˜ê¸° (DenseNet)</title>
  <link rel="stylesheet" href="style.css" />
  <script async src="https://docs.opencv.org/4.x/opencv.js" type="text/javascript"></script>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
</head>
<body>
  <!-- í—¤ë” -->
  <header>
    <div class="logo">
      <span class="dot"></span><span class="dot"></span>
      <span class="brand">SMART TEXTURE</span>
    </div>
    <nav>
      <a href="#home">Home</a>
      <a href="#project">í”„ë¡œì íŠ¸ ì†Œê°œ</a>
      <a href="#contact">ë¬¸ì˜í•˜ê¸°</a>
      <div class="mode-container">
        <label class="toggle-switch">
          <input type="checkbox" id="modeToggle">
          <span class="slider"></span>
          <div id="tooltip" class="tooltip">ì¼ë°˜ ëª¨ë“œì…ë‹ˆë‹¤! ì§ì ‘ ì²´í—˜í•´ë³´ì„¸ìš”!</div>
        </label>
      </div>
    </nav>
  </header>

  <div id="message-box" class="message-box"></div>

  <main>
    <section id="home">
      <h1>ìŠ¤ë§ˆíŠ¸ ì›ë‹¨ ë¶„ì„</h1>

      <div class="container">
        <div class="header" id="drop-area">
          <input type="file" id="file" accept="image/*" />
          <label for="file" class="upload-btn">ì´ë¯¸ì§€ ì—…ë¡œë“œ</label>

          <!-- ëª¨ë°”ì¼ ì „ìš© ì¹´ë©”ë¼ ì•± input -->
          <input type="file" id="cameraInput" accept="image/*" capture="environment" style="display:none;" />

          <button id="camera-btn" class="camera-btn">ğŸ“· ì¹´ë©”ë¼ë¡œ ì´¬ì˜</button>
          <p>ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ ì¹´ë©”ë¼ë¡œ ì´¬ì˜í•´ ì›ë‹¨ ì¢…ë¥˜ë¥¼ ë¶„ì„í•´ë³´ì„¸ìš”.</p>
        </div>

        <div id="status"></div>

        <div class="analysis-row">
          <div class="preview-wrapper">
            <img id="preview">
            <div class="scan-line" id="scan-line"></div>
            <button id="crop-btn" class="upload-btn" style="display:none;">ì´ë¯¸ì§€ ìë¥´ê¸°</button>
          </div>

          <div id="mainResultBox">
            <div id="result"></div>
            <div id="progressBarsContainer"></div>
            <div id="resultText"></div>
          </div>
        </div>

        <div id="mainResult" class="main-result"></div>

        <div class="action-buttons">
          <button id="btnCompareStart" class="btn">ë°±ì—…ë¡œê·¸</button>
          <button id="btnNew" class="btn">ìƒˆë¡œê³ ì¹¨</button>
        </div>

        <h3 id="shopTitle" style="display:none; text-align:center; margin-bottom:10px;">ğŸ› AI ì¶”ì²œ</h3>
        <div id="shopLinks" class="shop-links" style="display:none;"></div>

        <div id="comparePanel" class="compare-panel">
          <h5>ë¹„êµ ê²°ê³¼</h5>
          <div id="compareSlots" class="compare-slots"></div>
        </div>

        <div class="footer">
          <button id="btn" class="predict-btn">â–¶ ì˜ˆì¸¡í•˜ê¸°</button>
          <span id="loading">
            ì˜ˆì¸¡ ì¤‘
            <span class="loader"></span>
          </span>
        </div>
      </div>
    </section>

    <!-- í”„ë¡œì íŠ¸ ë° ê¸°íƒ€ ì„¹ì…˜ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <section id="project" class="project">
      <div class="intro-container">
        <!-- ë‚´ìš© ê·¸ëŒ€ë¡œ ìœ ì§€ -->
      </div>
    </section>

    <section id="contact" class="contact-section">
      <div class="container contact-container">
        <!-- ê¸°ì¡´ ë°©ëª…ë¡ í¼ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
      </div>
    </section>
  </main>

  <script src="app.js"></script>

  <!-- ëª¨ë°”ì¼/PC ì¹´ë©”ë¼ ì²˜ë¦¬ -->
  <script>
    const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

    // ëª¨ë°”ì¼ ì ‘ì† ì‹œ ë¬´ì¡°ê±´ ëª¨ë°”ì¼ ëª¨ë“œ í‘œì‹œ
    if(isMobile) {
      document.getElementById('modeToggle').checked = true;
      document.getElementById('tooltip').textContent = "ëª¨ë°”ì¼ ëª¨ë“œê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.";
    }

    document.getElementById("camera-btn").addEventListener("click", () => {
      if (isMobile) {
        // ëª¨ë°”ì¼: ê¸°ë³¸ ì¹´ë©”ë¼ ì•± ì‹¤í–‰ë§Œ
        document.getElementById("cameraInput").click();
      } else {
        // PC: ê¸°ì¡´ file input ë™ì‘
        document.getElementById("file").click();
      }
    });

    // ëª¨ë°”ì¼ì—ì„œ ì´¬ì˜ í›„ preview ë°˜ì˜
    document.getElementById("cameraInput").addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (!file) return;

      const preview = document.getElementById("preview");
      preview.src = URL.createObjectURL(file);
      preview.style.display = "block";

      // ê¸°ì¡´ file inputì—ë„ ë°˜ì˜ â†’ ë¶„ì„ ê¸°ëŠ¥ ìœ ì§€
      const originalInput = document.getElementById("file");
      originalInput.files = e.target.files;
    });
  </script>
</body>
</html>
